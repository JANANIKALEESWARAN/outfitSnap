{"ast":null,"code":"var _jsxFileName = \"D:\\\\ec\\\\E_Commerence\\\\frontend\\\\src\\\\Components\\\\Chatbot\\\\Chatbot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useMemo, useRef, useState } from 'react';\nimport './Chatbot.css';\nimport { ShopContext } from '../../Context/ShopContext';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst systemPrompts = ['Ask me about products, categories, prices, or style tips. Try: \"Show women t-shirts under $30\" or \"What is this site about?\"'];\nconst normalize = s => String(s || '').toLowerCase();\nconst STOPWORDS = new Set(['show', 'me', 'the', 'a', 'an', 'to', 'and', 'or', 'for', 'with', 'please', 'site', 'website', 'this', 'is', 'about', 'under', 'below', 'between', 'than', 'less', 'more', 'of', 'at', 'in']);\nconst SYNONYMS = new Map([['tshirt', 't-shirt'], ['tshirts', 't-shirt'], ['tee', 't-shirt'], ['hoodies', 'hoodie'], ['hoodie', 'hoodie'], ['shoe', 'shoes'], ['sneaker', 'shoes'], ['sneakers', 'shoes'], ['women', 'women'], ['womens', 'women'], [\"women's\", 'women'], ['men', 'men'], ['mens', 'men'], [\"men's\", 'men'], ['kid', 'kid'], ['kids', 'kid']]);\nfunction tokenize(q) {\n  return normalize(q).replace(/\\$/g, '').split(/[^a-z0-9]+/).filter(Boolean).map(t => SYNONYMS.get(t) || t).filter(t => !STOPWORDS.has(t));\n}\nfunction searchProducts(products, query) {\n  var _q$match;\n  const q = normalize(query);\n  const tokens = tokenize(q);\n\n  // Price filters\n  const exactNumber = ((_q$match = q.match(/\\$?(\\d+)/g)) === null || _q$match === void 0 ? void 0 : _q$match.map(n => Number(n)).filter(n => !Number.isNaN(n))) || [];\n  let priceMin = null,\n    priceMax = null;\n  const betweenMatch = q.match(/between\\s*\\$?(\\d+)\\s*(and|to|-)\\s*\\$?(\\d+)/);\n  if (betweenMatch) {\n    const a = Number(betweenMatch[1]);\n    const b = Number(betweenMatch[3]);\n    priceMin = Math.min(a, b);\n    priceMax = Math.max(a, b);\n  } else if (/under|below|less than/.test(q) && exactNumber.length) {\n    priceMax = exactNumber[exactNumber.length - 1];\n  } else if (/over|above|more than/.test(q) && exactNumber.length) {\n    priceMin = exactNumber[exactNumber.length - 1];\n  }\n\n  // Category hints\n  const wantMen = tokens.includes('men');\n  const wantWomen = tokens.includes('women');\n  const wantKid = tokens.includes('kid');\n\n  // Score items\n  const scored = products.map(p => {\n    const name = normalize(`${p.name} ${p.category}`);\n    let score = 0;\n    if (wantMen && p.category === 'men') score += 3;\n    if (wantWomen && p.category === 'women') score += 3;\n    if (wantKid && p.category === 'kid') score += 3;\n    // token hits\n    const hits = tokens.filter(t => name.includes(t)).length;\n    score += hits * 2;\n    // light fuzzy: hyphen-insensitive tshirt\n    if (tokens.includes('tshirt') && name.includes('t-shirt')) score += 2;\n    return {\n      p,\n      score\n    };\n  });\n\n  // Apply price range filter\n  let filtered = scored.filter(({\n    p\n  }) => {\n    const price = Number(p.new_price);\n    if (priceMin != null && price < priceMin) return false;\n    if (priceMax != null && price > priceMax) return false;\n    return true;\n  });\n\n  // If a category term was present, hard filter to that category\n  if (wantMen || wantWomen || wantKid) {\n    filtered = filtered.filter(({\n      p\n    }) => wantMen && p.category === 'men' || wantWomen && p.category === 'women' || wantKid && p.category === 'kid');\n  }\n\n  // If no tokens after stopword removal, don't overfilterâ€”just return best priced subset if price is specified\n  if (tokens.length === 0 && (priceMin != null || priceMax != null)) {\n    filtered.sort((a, b) => a.p.new_price - b.p.new_price);\n    return filtered.slice(0, 8).map(x => x.p);\n  }\n\n  // Sort by score desc, then price asc\n  filtered.sort((a, b) => b.score - a.score || a.p.new_price - b.p.new_price);\n  return filtered.filter(x => x.score > 0).slice(0, 8).map(x => x.p);\n}\nfunction buildAnswer(query, products) {\n  const q = normalize(query);\n  if (!q.trim()) {\n    return {\n      text: \"Hi! I can help you explore the store. Ask for categories, price ranges, or product names.\",\n      items: []\n    };\n  }\n  if (/what\\s+is\\s+(this|the)\\s+(site|website)/.test(q) || /about\\s+this\\s+website/.test(q)) {\n    return {\n      text: \"This is an eâ€‘commerce store for fashion items across Men, Women, and Kids. You can browse categories, compare prices, try items virtually, add to cart, and save favorites in your wishlist.\",\n      items: []\n    };\n  }\n  if (/hello|hi|hey/.test(q)) {\n    return {\n      text: \"Hello! Ask me for products (e.g., 'women tâ€‘shirts under $30') or say a category like 'mens hoodies'.\",\n      items: []\n    };\n  }\n  const results = searchProducts(products, query).slice(0, 4);\n  if (results.length === 0) {\n    return {\n      text: \"I couldn't find matching items. Try changing the category or price range.\",\n      items: []\n    };\n  }\n  return {\n    text: `Here are some matches (${results.length} shown):`,\n    items: results\n  };\n}\nexport const Chatbot = () => {\n  _s();\n  const {\n    all_product\n  } = useContext(ShopContext);\n  const [open, setOpen] = useState(false);\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([{\n    role: 'system',\n    content: systemPrompts[0]\n  }, {\n    role: 'assistant',\n    content: 'Hi! I\\'m your shopping assistant. How can I help?'\n  }]);\n  const listRef = useRef(null);\n  const handleAsk = () => {\n    const q = input.trim();\n    if (!q) return;\n    const userMsg = {\n      role: 'user',\n      content: q\n    };\n    const answer = buildAnswer(q, all_product);\n    const botMsg = {\n      role: 'assistant',\n      content: answer.text,\n      items: answer.items\n    };\n    setMessages(prev => [...prev, userMsg, botMsg]);\n    setInput('');\n    setTimeout(() => {\n      if (listRef.current) listRef.current.scrollTop = listRef.current.scrollHeight;\n    }, 0);\n  };\n  const quickChips = useMemo(() => ['Show women t-shirts under $30', 'mens hoodies', 'kids shoes between $20 and $50', 'what is this website?'], []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbot-root\",\n    children: [!open && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"chatbot-fab\",\n      onClick: () => setOpen(true),\n      \"aria-label\": \"Open assistant\",\n      children: \"\\uD83D\\uDCAC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Shop Assistant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chatbot-close\",\n          onClick: () => setOpen(false),\n          \"aria-label\": \"Close\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-body\",\n        ref: listRef,\n        children: messages.map((m, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `msg msg-${m.role}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg-text\",\n            children: m.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this), Array.isArray(m.items) && m.items.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"results\",\n            children: m.items.map(item => /*#__PURE__*/_jsxDEV(Link, {\n              to: `/product/${item.id}`,\n              className: \"result-card\",\n              onClick: () => setOpen(false),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image,\n                alt: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-name\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-price\",\n                  children: [\"$\", item.new_price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 25\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 19\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-chips\",\n        children: quickChips.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => {\n            setInput(c);\n          },\n          children: c\n        }, c, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Ask about products, categories, or price...\",\n          onKeyDown: e => {\n            if (e.key === 'Enter') handleAsk();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAsk,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n};\n_s(Chatbot, \"eIVxfu40GqCW9IxqX8zbNc8Hr7I=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useContext","useMemo","useRef","useState","ShopContext","Link","jsxDEV","_jsxDEV","systemPrompts","normalize","s","String","toLowerCase","STOPWORDS","Set","SYNONYMS","Map","tokenize","q","replace","split","filter","Boolean","map","t","get","has","searchProducts","products","query","_q$match","tokens","exactNumber","match","n","Number","isNaN","priceMin","priceMax","betweenMatch","a","b","Math","min","max","test","length","wantMen","includes","wantWomen","wantKid","scored","p","name","category","score","hits","filtered","price","new_price","sort","slice","x","buildAnswer","trim","text","items","results","Chatbot","_s","all_product","open","setOpen","input","setInput","messages","setMessages","role","content","listRef","handleAsk","userMsg","answer","botMsg","prev","setTimeout","current","scrollTop","scrollHeight","quickChips","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","m","idx","Array","isArray","item","to","id","src","image","alt","c","value","onChange","e","target","placeholder","onKeyDown","key","_c","$RefreshReg$"],"sources":["D:/ec/E_Commerence/frontend/src/Components/Chatbot/Chatbot.jsx"],"sourcesContent":["import React, { useContext, useMemo, useRef, useState } from 'react';\nimport './Chatbot.css';\nimport { ShopContext } from '../../Context/ShopContext';\nimport { Link } from 'react-router-dom';\n\nconst systemPrompts = [\n  'Ask me about products, categories, prices, or style tips. Try: \"Show women t-shirts under $30\" or \"What is this site about?\"'\n];\n\nconst normalize = (s) => String(s || '').toLowerCase();\nconst STOPWORDS = new Set(['show','me','the','a','an','to','and','or','for','with','please','site','website','this','is','about','under','below','between','than','less','more','of','at','in']);\nconst SYNONYMS = new Map([\n  ['tshirt','t-shirt'], ['tshirts','t-shirt'], ['tee','t-shirt'],\n  ['hoodies','hoodie'], ['hoodie','hoodie'],\n  ['shoe','shoes'], ['sneaker','shoes'], ['sneakers','shoes'],\n  ['women','women'], ['womens','women'], [\"women's\",'women'],\n  ['men','men'], ['mens','men'], [\"men's\",'men'],\n  ['kid','kid'], ['kids','kid'],\n]);\n\nfunction tokenize(q){\n  return normalize(q)\n    .replace(/\\$/g,'')\n    .split(/[^a-z0-9]+/)\n    .filter(Boolean)\n    .map(t=>SYNONYMS.get(t) || t)\n    .filter(t=>!STOPWORDS.has(t));\n}\n\nfunction searchProducts(products, query) {\n  const q = normalize(query);\n  const tokens = tokenize(q);\n\n  // Price filters\n  const exactNumber = q.match(/\\$?(\\d+)/g)?.map(n=>Number(n)).filter(n=>!Number.isNaN(n)) || [];\n  let priceMin = null, priceMax = null;\n  const betweenMatch = q.match(/between\\s*\\$?(\\d+)\\s*(and|to|-)\\s*\\$?(\\d+)/);\n  if (betweenMatch) {\n    const a = Number(betweenMatch[1]);\n    const b = Number(betweenMatch[3]);\n    priceMin = Math.min(a,b); priceMax = Math.max(a,b);\n  } else if (/under|below|less than/.test(q) && exactNumber.length){\n    priceMax = exactNumber[exactNumber.length-1];\n  } else if (/over|above|more than/.test(q) && exactNumber.length){\n    priceMin = exactNumber[exactNumber.length-1];\n  }\n\n  // Category hints\n  const wantMen = tokens.includes('men');\n  const wantWomen = tokens.includes('women');\n  const wantKid = tokens.includes('kid');\n\n  // Score items\n  const scored = products.map(p=>{\n    const name = normalize(`${p.name} ${p.category}`);\n    let score = 0;\n    if (wantMen && p.category === 'men') score += 3;\n    if (wantWomen && p.category === 'women') score += 3;\n    if (wantKid && p.category === 'kid') score += 3;\n    // token hits\n    const hits = tokens.filter(t=>name.includes(t)).length;\n    score += hits * 2;\n    // light fuzzy: hyphen-insensitive tshirt\n    if (tokens.includes('tshirt') && name.includes('t-shirt')) score += 2;\n    return { p, score };\n  });\n\n  // Apply price range filter\n  let filtered = scored.filter(({p})=>{\n    const price = Number(p.new_price);\n    if (priceMin!=null && price < priceMin) return false;\n    if (priceMax!=null && price > priceMax) return false;\n    return true;\n  });\n\n  // If a category term was present, hard filter to that category\n  if (wantMen || wantWomen || wantKid){\n    filtered = filtered.filter(({p})=>\n      (wantMen && p.category==='men') || (wantWomen && p.category==='women') || (wantKid && p.category==='kid')\n    );\n  }\n\n  // If no tokens after stopword removal, don't overfilterâ€”just return best priced subset if price is specified\n  if (tokens.length === 0 && (priceMin!=null || priceMax!=null)){\n    filtered.sort((a,b)=> (a.p.new_price - b.p.new_price));\n    return filtered.slice(0,8).map(x=>x.p);\n  }\n\n  // Sort by score desc, then price asc\n  filtered.sort((a,b)=> b.score - a.score || (a.p.new_price - b.p.new_price));\n  return filtered.filter(x=>x.score>0).slice(0,8).map(x=>x.p);\n}\n\nfunction buildAnswer(query, products) {\n  const q = normalize(query);\n  if (!q.trim()) {\n    return { text: \"Hi! I can help you explore the store. Ask for categories, price ranges, or product names.\", items: [] };\n  }\n  if (/what\\s+is\\s+(this|the)\\s+(site|website)/.test(q) || /about\\s+this\\s+website/.test(q)) {\n    return { text: \"This is an eâ€‘commerce store for fashion items across Men, Women, and Kids. You can browse categories, compare prices, try items virtually, add to cart, and save favorites in your wishlist.\", items: [] };\n  }\n  if (/hello|hi|hey/.test(q)) {\n    return { text: \"Hello! Ask me for products (e.g., 'women tâ€‘shirts under $30') or say a category like 'mens hoodies'.\", items: [] };\n  }\n\n  const results = searchProducts(products, query).slice(0, 4);\n  if (results.length === 0) {\n    return { text: \"I couldn't find matching items. Try changing the category or price range.\", items: [] };\n  }\n  return { text: `Here are some matches (${results.length} shown):`, items: results };\n}\n\nexport const Chatbot = () => {\n  const { all_product } = useContext(ShopContext);\n  const [open, setOpen] = useState(false);\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([\n    { role: 'system', content: systemPrompts[0] },\n    { role: 'assistant', content: 'Hi! I\\'m your shopping assistant. How can I help?' }\n  ]);\n  const listRef = useRef(null);\n\n  const handleAsk = () => {\n    const q = input.trim();\n    if (!q) return;\n    const userMsg = { role: 'user', content: q };\n    const answer = buildAnswer(q, all_product);\n    const botMsg = { role: 'assistant', content: answer.text, items: answer.items };\n    setMessages(prev => [...prev, userMsg, botMsg]);\n    setInput('');\n    setTimeout(() => {\n      if (listRef.current) listRef.current.scrollTop = listRef.current.scrollHeight;\n    }, 0);\n  };\n\n  const quickChips = useMemo(() => [\n    'Show women t-shirts under $30',\n    'mens hoodies',\n    'kids shoes between $20 and $50',\n    'what is this website?',\n  ], []);\n\n  return (\n    <div className=\"chatbot-root\">\n      {!open && (\n        <button className=\"chatbot-fab\" onClick={() => setOpen(true)} aria-label=\"Open assistant\">\n          ðŸ’¬\n        </button>\n      )}\n      {open && (\n        <div className=\"chatbot-panel\">\n          <div className=\"chatbot-header\">\n            <strong>Shop Assistant</strong>\n            <button className=\"chatbot-close\" onClick={() => setOpen(false)} aria-label=\"Close\">Ã—</button>\n          </div>\n          <div className=\"chatbot-body\" ref={listRef}>\n            {messages.map((m, idx) => (\n              <div key={idx} className={`msg msg-${m.role}`}>\n                <div className=\"msg-text\">{m.content}</div>\n                {Array.isArray(m.items) && m.items.length > 0 && (\n                  <div className=\"results\">\n                    {m.items.map(item => (\n                      <Link key={item.id} to={`/product/${item.id}`} className=\"result-card\" onClick={() => setOpen(false)}>\n                        <img src={item.image} alt={item.name} />\n                        <div className=\"rc-meta\">\n                          <div className=\"rc-name\">{item.name}</div>\n                          <div className=\"rc-price\">${item.new_price}</div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n          <div className=\"chatbot-chips\">\n            {quickChips.map((c) => (\n              <button key={c} className=\"chip\" onClick={() => { setInput(c); }}>\n                {c}\n              </button>\n            ))}\n          </div>\n          <div className=\"chatbot-input\">\n            <input\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Ask about products, categories, or price...\"\n              onKeyDown={(e) => { if (e.key === 'Enter') handleAsk(); }}\n            />\n            <button onClick={handleAsk}>Send</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Chatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
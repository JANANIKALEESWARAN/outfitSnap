{"ast":null,"code":"var _jsxFileName = \"D:\\\\ec\\\\E_Commerence\\\\frontend\\\\src\\\\Context\\\\WishlistContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useMemo, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const WishlistContext = /*#__PURE__*/createContext(null);\nconst STORAGE_PREFIX = 'wishlist-items-v1::';\nconst WishlistProvider = ({\n  children\n}) => {\n  _s();\n  // Use stable per-account key (email stored at login/signup)\n  const userKey = localStorage.getItem('user-key') || 'guest';\n  const storageKey = `${STORAGE_PREFIX}${userKey}`;\n  const [wishlist, setWishlist] = useState(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      if (raw) {\n        return JSON.parse(raw);\n      } else {\n        // Migrate only from guest list if present (avoid cross-account leakage)\n        const guestKey = `${STORAGE_PREFIX}guest`;\n        const guestRaw = localStorage.getItem(guestKey);\n        const guestList = guestRaw ? JSON.parse(guestRaw) : [];\n        return Array.isArray(guestList) ? guestList : [];\n      }\n    } catch {\n      return [];\n    }\n  });\n  useEffect(() => {\n    try {\n      localStorage.setItem(storageKey, JSON.stringify(wishlist));\n    } catch {}\n  }, [wishlist, storageKey]);\n  const toggleWishlist = id => {\n    setWishlist(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);\n  };\n  const clearWishlist = () => setWishlist([]);\n  const isWishlisted = id => wishlist.includes(id);\n  const count = wishlist.length;\n  const value = useMemo(() => ({\n    wishlist,\n    toggleWishlist,\n    clearWishlist,\n    isWishlisted,\n    count\n  }), [wishlist]);\n  return /*#__PURE__*/_jsxDEV(WishlistContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 10\n  }, this);\n};\n_s(WishlistProvider, \"bB6ej6uR72M0uuvCTelU3o9KCaY=\");\n_c = WishlistProvider;\nexport default WishlistProvider;\nvar _c;\n$RefreshReg$(_c, \"WishlistProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useMemo","useState","jsxDEV","_jsxDEV","WishlistContext","STORAGE_PREFIX","WishlistProvider","children","_s","userKey","localStorage","getItem","storageKey","wishlist","setWishlist","raw","JSON","parse","guestKey","guestRaw","guestList","Array","isArray","setItem","stringify","toggleWishlist","id","prev","includes","filter","x","clearWishlist","isWishlisted","count","length","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/ec/E_Commerence/frontend/src/Context/WishlistContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useMemo, useState } from 'react';\n\nexport const WishlistContext = createContext(null);\nconst STORAGE_PREFIX = 'wishlist-items-v1::';\n\nconst WishlistProvider = ({ children }) => {\n  // Use stable per-account key (email stored at login/signup)\n  const userKey = localStorage.getItem('user-key') || 'guest';\n  const storageKey = `${STORAGE_PREFIX}${userKey}`;\n\n  const [wishlist, setWishlist] = useState(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      if (raw) {\n        return JSON.parse(raw);\n      } else {\n        // Migrate only from guest list if present (avoid cross-account leakage)\n        const guestKey = `${STORAGE_PREFIX}guest`;\n        const guestRaw = localStorage.getItem(guestKey);\n        const guestList = guestRaw ? JSON.parse(guestRaw) : [];\n        return Array.isArray(guestList) ? guestList : [];\n      }\n    } catch {\n      return [];\n    }\n  });\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(storageKey, JSON.stringify(wishlist));\n    } catch {}\n  }, [wishlist, storageKey]);\n\n  const toggleWishlist = (id) => {\n    setWishlist((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\n  };\n\n  const clearWishlist = () => setWishlist([]);\n  const isWishlisted = (id) => wishlist.includes(id);\n  const count = wishlist.length;\n\n  const value = useMemo(\n    () => ({ wishlist, toggleWishlist, clearWishlist, isWishlisted, count }),\n    [wishlist]\n  );\n\n  return <WishlistContext.Provider value={value}>{children}</WishlistContext.Provider>;\n};\n\nexport default WishlistProvider;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3E,OAAO,MAAMC,eAAe,gBAAGN,aAAa,CAAC,IAAI,CAAC;AAClD,MAAMO,cAAc,GAAG,qBAAqB;AAE5C,MAAMC,gBAAgB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACzC;EACA,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,OAAO;EAC3D,MAAMC,UAAU,GAAG,GAAGP,cAAc,GAAGI,OAAO,EAAE;EAEhD,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,MAAM;IAC7C,IAAI;MACF,MAAMc,GAAG,GAAGL,YAAY,CAACC,OAAO,CAACC,UAAU,CAAC;MAC5C,IAAIG,GAAG,EAAE;QACP,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC;MACxB,CAAC,MAAM;QACL;QACA,MAAMG,QAAQ,GAAG,GAAGb,cAAc,OAAO;QACzC,MAAMc,QAAQ,GAAGT,YAAY,CAACC,OAAO,CAACO,QAAQ,CAAC;QAC/C,MAAME,SAAS,GAAGD,QAAQ,GAAGH,IAAI,CAACC,KAAK,CAACE,QAAQ,CAAC,GAAG,EAAE;QACtD,OAAOE,KAAK,CAACC,OAAO,CAACF,SAAS,CAAC,GAAGA,SAAS,GAAG,EAAE;MAClD;IACF,CAAC,CAAC,MAAM;MACN,OAAO,EAAE;IACX;EACF,CAAC,CAAC;EAEFrB,SAAS,CAAC,MAAM;IACd,IAAI;MACFW,YAAY,CAACa,OAAO,CAACX,UAAU,EAAEI,IAAI,CAACQ,SAAS,CAACX,QAAQ,CAAC,CAAC;IAC5D,CAAC,CAAC,MAAM,CAAC;EACX,CAAC,EAAE,CAACA,QAAQ,EAAED,UAAU,CAAC,CAAC;EAE1B,MAAMa,cAAc,GAAIC,EAAE,IAAK;IAC7BZ,WAAW,CAAEa,IAAI,IAAMA,IAAI,CAACC,QAAQ,CAACF,EAAE,CAAC,GAAGC,IAAI,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKJ,EAAE,CAAC,GAAG,CAAC,GAAGC,IAAI,EAAED,EAAE,CAAE,CAAC;EAC3F,CAAC;EAED,MAAMK,aAAa,GAAGA,CAAA,KAAMjB,WAAW,CAAC,EAAE,CAAC;EAC3C,MAAMkB,YAAY,GAAIN,EAAE,IAAKb,QAAQ,CAACe,QAAQ,CAACF,EAAE,CAAC;EAClD,MAAMO,KAAK,GAAGpB,QAAQ,CAACqB,MAAM;EAE7B,MAAMC,KAAK,GAAGnC,OAAO,CACnB,OAAO;IAAEa,QAAQ;IAAEY,cAAc;IAAEM,aAAa;IAAEC,YAAY;IAAEC;EAAM,CAAC,CAAC,EACxE,CAACpB,QAAQ,CACX,CAAC;EAED,oBAAOV,OAAA,CAACC,eAAe,CAACgC,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAA5B,QAAA,EAAEA;EAAQ;IAAA8B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAA2B,CAAC;AACtF,CAAC;AAAChC,EAAA,CA1CIF,gBAAgB;AAAAmC,EAAA,GAAhBnC,gBAAgB;AA4CtB,eAAeA,gBAAgB;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
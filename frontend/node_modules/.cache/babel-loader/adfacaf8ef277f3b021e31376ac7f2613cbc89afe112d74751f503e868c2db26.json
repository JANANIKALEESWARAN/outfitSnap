{"ast":null,"code":"var _jsxFileName = \"D:\\\\ec\\\\E_Commerence\\\\frontend\\\\src\\\\Context\\\\WishlistContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useMemo, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const WishlistContext = /*#__PURE__*/createContext(null);\nconst STORAGE_PREFIX = 'wishlist-items-v1::';\nconst WishlistProvider = ({\n  children\n}) => {\n  _s();\n  const userKey = localStorage.getItem('user-key') || 'guest';\n  const storageKey = `${STORAGE_PREFIX}${userKey}`;\n  const [wishlist, setWishlist] = useState(() => {\n    try {\n      // 1) Current per-user storage\n      const raw = localStorage.getItem(storageKey);\n      if (raw) return JSON.parse(raw);\n\n      // 2) Legacy token-based key\n      const token = localStorage.getItem('auth-token') || '';\n      const legacyTokenKey = token ? `${STORAGE_PREFIX}${token}` : '';\n      if (legacyTokenKey) {\n        const legacyTokenRaw = localStorage.getItem(legacyTokenKey);\n        if (legacyTokenRaw) return JSON.parse(legacyTokenRaw);\n      }\n\n      // 3) Legacy global key (pre-accounts)\n      const legacyGlobalKey = 'wishlist-items-v1';\n      const legacyGlobalRaw = localStorage.getItem(legacyGlobalKey);\n      if (legacyGlobalRaw) return JSON.parse(legacyGlobalRaw);\n\n      // 4) Guest carry-over (optional)\n      const guestKey = `${STORAGE_PREFIX}guest`;\n      const guestRaw = localStorage.getItem(guestKey);\n      if (guestRaw) return JSON.parse(guestRaw);\n      return [];\n    } catch (e) {\n      return [];\n    }\n  });\n\n  // When the user changes (user-key changes), load that user's wishlist\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      if (raw) setWishlist(JSON.parse(raw));\n    } catch {\n      setWishlist([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [storageKey]);\n  const toggleWishlist = id => {\n    setWishlist(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);\n  };\n  const clearWishlist = () => setWishlist([]);\n  const isWishlisted = id => wishlist.includes(id);\n  const count = wishlist.length;\n  const value = useMemo(() => ({\n    wishlist,\n    toggleWishlist,\n    clearWishlist,\n    isWishlisted,\n    count\n  }), [wishlist]);\n  return /*#__PURE__*/_jsxDEV(WishlistContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 10\n  }, this);\n};\n_s(WishlistProvider, \"JThA3OKtNBjHoPbpcyPZhj+AWYU=\");\n_c = WishlistProvider;\nexport default WishlistProvider;\nvar _c;\n$RefreshReg$(_c, \"WishlistProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useMemo","useState","jsxDEV","_jsxDEV","WishlistContext","STORAGE_PREFIX","WishlistProvider","children","_s","userKey","localStorage","getItem","storageKey","wishlist","setWishlist","raw","JSON","parse","token","legacyTokenKey","legacyTokenRaw","legacyGlobalKey","legacyGlobalRaw","guestKey","guestRaw","e","toggleWishlist","id","prev","includes","filter","x","clearWishlist","isWishlisted","count","length","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/ec/E_Commerence/frontend/src/Context/WishlistContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useMemo, useState } from 'react';\n\nexport const WishlistContext = createContext(null);\nconst STORAGE_PREFIX = 'wishlist-items-v1::';\n\nconst WishlistProvider = ({ children }) => {\n  const userKey = localStorage.getItem('user-key') || 'guest';\n  const storageKey = `${STORAGE_PREFIX}${userKey}`;\n\n  const [wishlist, setWishlist] = useState(() => {\n    try {\n      // 1) Current per-user storage\n      const raw = localStorage.getItem(storageKey);\n      if (raw) return JSON.parse(raw);\n\n      // 2) Legacy token-based key\n      const token = localStorage.getItem('auth-token') || '';\n      const legacyTokenKey = token ? `${STORAGE_PREFIX}${token}` : '';\n      if (legacyTokenKey) {\n        const legacyTokenRaw = localStorage.getItem(legacyTokenKey);\n        if (legacyTokenRaw) return JSON.parse(legacyTokenRaw);\n      }\n\n      // 3) Legacy global key (pre-accounts)\n      const legacyGlobalKey = 'wishlist-items-v1';\n      const legacyGlobalRaw = localStorage.getItem(legacyGlobalKey);\n      if (legacyGlobalRaw) return JSON.parse(legacyGlobalRaw);\n\n      // 4) Guest carry-over (optional)\n      const guestKey = `${STORAGE_PREFIX}guest`;\n      const guestRaw = localStorage.getItem(guestKey);\n      if (guestRaw) return JSON.parse(guestRaw);\n\n      return [];\n    } catch (e) {\n      return [];\n    }\n  });\n\n  // When the user changes (user-key changes), load that user's wishlist\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      if (raw) setWishlist(JSON.parse(raw));\n    } catch {\n      setWishlist([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [storageKey]);\n\n  const toggleWishlist = (id) => {\n    setWishlist((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\n  };\n\n  const clearWishlist = () => setWishlist([]);\n  const isWishlisted = (id) => wishlist.includes(id);\n  const count = wishlist.length;\n\n  const value = useMemo(\n    () => ({ wishlist, toggleWishlist, clearWishlist, isWishlisted, count }),\n    [wishlist]\n  );\n\n  return <WishlistContext.Provider value={value}>{children}</WishlistContext.Provider>;\n};\n\nexport default WishlistProvider;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3E,OAAO,MAAMC,eAAe,gBAAGN,aAAa,CAAC,IAAI,CAAC;AAClD,MAAMO,cAAc,GAAG,qBAAqB;AAE5C,MAAMC,gBAAgB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACzC,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,OAAO;EAC3D,MAAMC,UAAU,GAAG,GAAGP,cAAc,GAAGI,OAAO,EAAE;EAEhD,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,MAAM;IAC7C,IAAI;MACF;MACA,MAAMc,GAAG,GAAGL,YAAY,CAACC,OAAO,CAACC,UAAU,CAAC;MAC5C,IAAIG,GAAG,EAAE,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC;;MAE/B;MACA,MAAMG,KAAK,GAAGR,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;MACtD,MAAMQ,cAAc,GAAGD,KAAK,GAAG,GAAGb,cAAc,GAAGa,KAAK,EAAE,GAAG,EAAE;MAC/D,IAAIC,cAAc,EAAE;QAClB,MAAMC,cAAc,GAAGV,YAAY,CAACC,OAAO,CAACQ,cAAc,CAAC;QAC3D,IAAIC,cAAc,EAAE,OAAOJ,IAAI,CAACC,KAAK,CAACG,cAAc,CAAC;MACvD;;MAEA;MACA,MAAMC,eAAe,GAAG,mBAAmB;MAC3C,MAAMC,eAAe,GAAGZ,YAAY,CAACC,OAAO,CAACU,eAAe,CAAC;MAC7D,IAAIC,eAAe,EAAE,OAAON,IAAI,CAACC,KAAK,CAACK,eAAe,CAAC;;MAEvD;MACA,MAAMC,QAAQ,GAAG,GAAGlB,cAAc,OAAO;MACzC,MAAMmB,QAAQ,GAAGd,YAAY,CAACC,OAAO,CAACY,QAAQ,CAAC;MAC/C,IAAIC,QAAQ,EAAE,OAAOR,IAAI,CAACC,KAAK,CAACO,QAAQ,CAAC;MAEzC,OAAO,EAAE;IACX,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,OAAO,EAAE;IACX;EACF,CAAC,CAAC;;EAEF;EACA1B,SAAS,CAAC,MAAM;IACd,IAAI;MACF,MAAMgB,GAAG,GAAGL,YAAY,CAACC,OAAO,CAACC,UAAU,CAAC;MAC5C,IAAIG,GAAG,EAAED,WAAW,CAACE,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC;IACvC,CAAC,CAAC,MAAM;MACND,WAAW,CAAC,EAAE,CAAC;IACjB;IACA;EACF,CAAC,EAAE,CAACF,UAAU,CAAC,CAAC;EAEhB,MAAMc,cAAc,GAAIC,EAAE,IAAK;IAC7Bb,WAAW,CAAEc,IAAI,IAAMA,IAAI,CAACC,QAAQ,CAACF,EAAE,CAAC,GAAGC,IAAI,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKJ,EAAE,CAAC,GAAG,CAAC,GAAGC,IAAI,EAAED,EAAE,CAAE,CAAC;EAC3F,CAAC;EAED,MAAMK,aAAa,GAAGA,CAAA,KAAMlB,WAAW,CAAC,EAAE,CAAC;EAC3C,MAAMmB,YAAY,GAAIN,EAAE,IAAKd,QAAQ,CAACgB,QAAQ,CAACF,EAAE,CAAC;EAClD,MAAMO,KAAK,GAAGrB,QAAQ,CAACsB,MAAM;EAE7B,MAAMC,KAAK,GAAGpC,OAAO,CACnB,OAAO;IAAEa,QAAQ;IAAEa,cAAc;IAAEM,aAAa;IAAEC,YAAY;IAAEC;EAAM,CAAC,CAAC,EACxE,CAACrB,QAAQ,CACX,CAAC;EAED,oBAAOV,OAAA,CAACC,eAAe,CAACiC,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAA7B,QAAA,EAAEA;EAAQ;IAAA+B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAA2B,CAAC;AACtF,CAAC;AAACjC,EAAA,CA3DIF,gBAAgB;AAAAoC,EAAA,GAAhBpC,gBAAgB;AA6DtB,eAAeA,gBAAgB;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}